"use strict";(self["webpackChunkai_bot"]=self["webpackChunkai_bot"]||[]).push([[535,245],{9245:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"30px","font-size":"35px"}},[t("span",{attrs:{className:"time",id:"time"}},[t("span",{attrs:{className:"date"}},[e._v(e._s(e.nowTime))]),t("span",{attrs:{className:"hour"}},[e._v(e._s(e.time.hour))]),t("a",{attrs:{className:"split"}},[e._v(":")]),t("span",{attrs:{className:"minitus"}},[e._v(e._s(e.time.minitus))]),t("a",{attrs:{className:"split"}},[e._v(":")]),t("span",{attrs:{className:"seconds"}},[e._v(e._s(e.time.seconds))])])])},a=[],i={name:"DateUtils",data(){return{time:{hour:"00",minitus:"00",seconds:"00"},nowTime:"",week:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"]}},computed:{formattedTime(){return{hour:this.format(this.time.hour),minitus:this.format(this.time.minitus),seconds:this.format(this.time.seconds)}}},mounted(){this.updateTime(),setInterval(this.updateTime,1e3)},methods:{updateTime(){const e=new Date;let t=e.getHours();t=t.toString().padStart(2,"0"),this.time.hour=t,this.time.minitus=e.getMinutes().toString().padStart(2,"0"),this.time.seconds=e.getSeconds().toString().padStart(2,"0"),this.nowTime=this.formatDate(e)},format(e){return e.toString().padStart(2,"0")},formatDate(e){const t=e.getFullYear(),s=e.getMonth()+1,r=e.getDate(),a=this.week[e.getDay()];return`${t}年${this.format(s)}月${this.format(r)}日 ${a}`}}},o=i,l=s(1656),n=(0,l.A)(o,r,a,!1,null,"0f98a328",null),m=n.exports},4535:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("h1",{staticClass:"welcome-text"},[e._v(e._s(e.welcomeMessage)+" "+e._s(e.user.name))]),t("el-descriptions",{staticClass:"profile",attrs:{title:"个人中心",border:""}},[t("el-descriptions-item",{attrs:{label:"账号"}},[e._v(e._s(e.user.no))]),t("el-descriptions-item",{attrs:{label:"电话"}},[e._v(e._s(e.user.phone))]),t("el-descriptions-item",{attrs:{label:"性别"}},[t("el-tag",{attrs:{type:e.userSexType,effect:"dark"}},[t("i",{class:e.userSexIcon}),e._v(" "+e._s(e.userSexText)+" ")])],1),t("el-descriptions-item",{attrs:{label:"角色"}},[t("el-tag",{attrs:{type:"success",effect:"dark"}},[e._v(e._s(e.userRoleText))])],1),t("el-descriptions-item",{attrs:{label:"管理"}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.editUser}},[e._v("修改个人信息")])],1)],1),t("el-dialog",{attrs:{title:"编辑用户信息",visible:e.centerDialogVisible,width:"30%",center:"","custom-class":"user-dialog"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"账号",prop:"no"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.no,callback:function(t){e.$set(e.form,"no",t)},expression:"form.no"}})],1),t("el-form-item",{attrs:{label:"名字",prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[t("el-radio",{attrs:{label:"1"}},[e._v("男")]),t("el-radio",{attrs:{label:"0"}},[e._v("女")])],1)],1),t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1),t("date-utils",{staticClass:"current-date"})],1)},a=[],i=(s(4114),s(9245)),o={name:"Home",components:{DateUtils:i["default"]},data(){return{user:{},centerDialogVisible:!1,form:{id:"",no:"",name:"",password:"",age:"",phone:"",sex:"0"},rules:{no:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入名字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:4,max:9,message:"长度在 4 到 9 个字符",trigger:"blur"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{validator:this.checkAge,trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},computed:{welcomeMessage(){return"欢迎您！"},userSexType(){return 1===this.user.sex?"primary":"success"},userSexIcon(){return 1===this.user.sex?"el-icon-male":"el-icon-female"},userSexText(){return 1===this.user.sex?"男":"女"},userRoleText(){return 0===this.user.roleId?"超级管理员":1===this.user.roleId?"管理员":"用户"}},mounted(){this.init()},methods:{init(){this.user=JSON.parse(sessionStorage.getItem("CurUser")),console.log(this.user)},resetForm(){this.$refs.form.resetFields(),this.form={id:"",no:"",name:"",password:"",age:"",phone:"",sex:"0"}},editUser(){this.centerDialogVisible=!0,this.$nextTick((()=>{this.form={id:this.user.id,no:this.user.no,name:this.user.name,password:"",age:this.user.age,phone:this.user.phone,sex:this.user.sex.toString()}}))},checkAge(e,t,s){t>150?s(new Error("年龄输入过大")):s()},save(){this.$refs.form.validate((e=>{if(!e)return console.log("error submit!!"),!1;this.form.id?this.doMod():this.doSave(),this.$message({type:"success",message:"修改信息成功"}),sessionStorage.clear(),this.$router.push("/")})),location.reload()},doSave(){this.$axios.post(this.$httpUrl+"/user/save",this.form).then((e=>{200==e.data.code?(this.$message({message:"操作成功！",type:"success"}),this.centerDialogVisible=!1,this.loadPost(),this.resetForm()):this.$message({message:"操作失败！",type:"error"})}))},doMod(){this.$axios.post(this.$httpUrl+"/user/update",this.form).then((e=>{200==e.data.code?(this.$message({message:"操作成功！",type:"success"}),this.centerDialogVisible=!1,this.loadPost(),this.resetForm()):this.$message({message:"操作失败！",type:"error"})}))},loadPost(){this.$axios.get(this.$httpUrl+"/user/list").then((e=>{this.tableData=e.data}))}}},l=o,n=s(1656),m=(0,n.A)(l,r,a,!1,null,"3ca79275",null),u=m.exports}}]);
//# sourceMappingURL=535.931ead65.js.map